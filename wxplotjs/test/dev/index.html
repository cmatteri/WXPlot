<!DOCTYPE html>
<meta charset="utf-8">
<html>
  <head>
    <title>WxPlot Demo</title>
    <link rel="stylesheet" type="text/css" href="wxplot.css" />
  </head>
  
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.5/moment-timezone-with-data-2010-2020.min.js"></script>
    <script src="wxplot.js"></script>
    <script>
      // See readme.md for API documentation.
      WXPlot = require('wxplot');
      const domain = {
        start: +(new Date("1/1/2015")),
        end: +(new Date("1/1/2016"))
      };
      const domainExtent = {
        start: +(new Date("1/1/2015")), 
        end: +Date.now()
      };

      var dataParams = {
        aggregateType: "max",
        url: "/weewx/wxplot_binding/outTemp", 
        archiveIntervalMinutes: 5,
        minDataPoints: 25
      }
      
      const plot = new WXPlot(d3.select("body"), "America/Los_Angeles", "Temperature (F)",
        domain, domainExtent)
          .addTrace(dataParams, "max", "steelblue", [], 0.5);
      
      dataParams.aggregateType = "avg";
      plot.addTrace(dataParams, "avg", "steelblue", [], 1.5);
      
      dataParams.aggregateType = "min";
      plot.addTrace(dataParams, "min", "steelblue", [], 0.5);
    </script>
  </body>
</html>